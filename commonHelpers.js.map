{"version":3,"file":"commonHelpers.js","sources":["../src/js/renderMarkup.js","../src/js/customIziToast.js","../src/main.js"],"sourcesContent":["const gallery = document.querySelector('.gallery');\n\nexport function renderContent({ hits }) {\n    const markup = hits.map(({ largeImageURL, webformatURL, likes, views, comments, downloads }) => {\n        return `\n        <li class=\"gallery-item\">\n        <a href=\"${largeImageURL}\">\n        <img\n        src=\"${webformatURL}\"\n        alt=\"\"\n        class=\"gallery-item-img\"\n        width=\"350\"\n        height=\"200\"/>\n        </a>\n        <div class=\"info-wrapper\">\n        <ul class=\"info-list\">\n        <li class=\"info-item\">\n        <p class=\"info-name\">Likes</p>\n        <p class=\"info-value\">${likes}</p>\n        </li>\n        <li class=\"info-item\">\n        <p class=\"info-name\">Viewes</p>\n        <p class=\"info-value\">${views}</p>\n        </li>\n        <li class=\"info-item\">\n        <p class=\"info-name\">Comments</p>\n        <p class=\"info-value\">${comments}</p>\n        </li>\n        <li class=\"info-item\">\n        <p class=\"info-name\">Downloads</p>\n        <p class=\"info-value\">${downloads}</p>\n        </li>\n        </ul>\n        </div>\n        </li>`\n    }).join('');\n    gallery.innerHTML += markup;\n}","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst errorMessage = \"Sorry, there are no images matching<br> your search query. Please try again!\";\nexport const iziToastError = {\n    title: 'Error',\n    message: errorMessage,\n    messageSize: '16px',\n    position: 'topRight',\n    theme: 'dark',\n    backgroundColor: \"#EF4040\",\n    color: \"#ffffff\",\n}","'use strict';\nimport axios from \"axios\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport { renderContent } from \"./js/renderMarkup\";\nimport { iziToastError } from \"./js/customIziToast\";\n\nconst form = document.querySelector('.form'),\n    gallery = document.querySelector('.gallery'),\n    moreBtn = document.querySelector('.more'),\n    spinner = document.querySelector('.spinner');\n\nlet searchQuery = null;\nlet page = 1;\nconst per_page = 15;\nlet numberLastPage = null;\n\nform.addEventListener('submit', onFormSubmit);\nmoreBtn.addEventListener('click', paginationElements)\n\nasync function onFormSubmit(e) {\n    e.preventDefault();\n    searchQuery = e.target.elements.input.value.trim();\n    try {\n        resetForm();\n        const response = await fetch();\n        if (response.total != 0) {\n            numberLastPage = Math.round(response.totalHits / per_page)\n            showSpinner(true);\n            renderContent(response);\n            showSpinner(false);\n            showMoreBtn(true);\n        } else {\n            iziToast.error(iziToastError);\n        }\n    } catch (error) {\n        console.log(error.status);\n    }\n    popupPictureWindow();\n}\n\nasync function paginationElements() {\n    page++;\n    showMoreBtn(false);\n    showSpinner(true);\n    const response = await fetch();\n    renderContent(response);\n    if (page < numberLastPage) {\n        scrollGallery();\n        showSpinner(false);\n        showMoreBtn(true);\n    } else {\n        showMoreBtn(false);\n        showSpinner(false);\n        reportTheEndSearch();\n    }\n    popupPictureWindow();\n}\n\nasync function fetch() {\n    const API_KEY = '41991233-e464ef3fed32efbb52a55d5bb'\n    const instance = axios.create({\n        baseURL: 'https://pixabay.com'\n    });\n    const params = {\n        page,\n        per_page,\n        orientation: 'horizontal',\n        image_type: 'photo',\n    }\n    const response = await instance.get(`/api/?key=${API_KEY}&q=${searchQuery}`, { params });\n    return response.data;\n}\nfunction showMoreBtn(show) {\n    show ? moreBtn.style.display = 'block' : moreBtn.style.display = 'none';\n}\nfunction showSpinner(show) {\n    show ? spinner.style.visibility = 'visible' : spinner.style.visibility = 'hidden';\n}\nfunction resetForm() {\n    form.reset();\n    gallery.innerHTML = '';\n    page = 1;\n}\nfunction reportTheEndSearch() {\n    const noMorePagesMessage = document.createElement('p');\n    const noMoreText = \"We're sorry, but you've reached the end of search results.\";\n    noMorePagesMessage.classList.add('message');\n    noMorePagesMessage.textContent = noMoreText;\n    gallery.parentNode.appendChild(noMorePagesMessage)\n}\nfunction popupPictureWindow() {\n    let lightbox = new SimpleLightbox('.gallery a', {\n        captions: true,\n        captionType: 'attr',\n        captionsData: 'title',\n        captionDelay: 250,\n        captionPosition: 'bottom',\n    });\n    lightbox.show();\n    lightbox.refresh();\n}\nfunction scrollGallery() {\n    const galleryItem = document.querySelector('.gallery-item');\n    let height = galleryItem.getBoundingClientRect().height;\n    height = Math.round(height);\n    const scrollByTimes = 2;\n    window.scrollBy(0, height * scrollByTimes);\n}"],"names":["gallery","renderContent","hits","markup","largeImageURL","webformatURL","likes","views","comments","downloads","errorMessage","iziToastError","form","moreBtn","spinner","searchQuery","page","per_page","numberLastPage","onFormSubmit","paginationElements","resetForm","response","fetch","showSpinner","showMoreBtn","iziToast","error","popupPictureWindow","scrollGallery","reportTheEndSearch","API_KEY","instance","axios","params","show","noMorePagesMessage","noMoreText","lightbox","SimpleLightbox","height","scrollByTimes"],"mappings":"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"}