{"version":3,"file":"commonHelpers.js","sources":["../src/js/renderMarkup.js","../src/js/customIziToast.js","../src/main.js"],"sourcesContent":["const gallery = document.querySelector('.gallery');\n\nexport function renderContent({ hits }) {\n    const markup = hits.map(({ largeImageURL, webformatURL, likes, views, comments, downloads }) => {\n        return `\n        <li class=\"gallery-item\">\n        <a href=\"${largeImageURL}\">\n        <img\n        src=\"${webformatURL}\"\n        alt=\"\"\n        class=\"gallery-item-img\"\n        width=\"350\"\n        height=\"200\"/>\n        </a>\n        <div class=\"info-wrapper\">\n        <ul class=\"info-list\">\n        <li class=\"info-item\">\n        <p class=\"info-name\">Likes</p>\n        <p class=\"info-value\">${likes}</p>\n        </li>\n        <li class=\"info-item\">\n        <p class=\"info-name\">Viewes</p>\n        <p class=\"info-value\">${views}</p>\n        </li>\n        <li class=\"info-item\">\n        <p class=\"info-name\">Comments</p>\n        <p class=\"info-value\">${comments}</p>\n        </li>\n        <li class=\"info-item\">\n        <p class=\"info-name\">Downloads</p>\n        <p class=\"info-value\">${downloads}</p>\n        </li>\n        </ul>\n        </div>\n        </li>`\n    }).join('');\n    gallery.innerHTML += markup;\n}","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst errorMessage = \"Sorry, there are no images matching<br> your search query. Please try again!\";\nexport const iziToastError = {\n    title: 'Error',\n    message: errorMessage,\n    messageSize: '16px',\n    position: 'topRight',\n    theme: 'dark',\n    backgroundColor: \"#EF4040\",\n    color: \"#ffffff\",\n}","'use strict';\nimport axios from \"axios\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport { renderContent } from \"./js/renderMarkup\";\nimport { iziToastError } from \"./js/customIziToast\";\n\nconst form = document.querySelector('.form'),\n    gallery = document.querySelector('.gallery'),\n    moreBtn = document.querySelector('.more'),\n    spinner = document.querySelector('.spinner'),\n    lastPageMessage = document.querySelector('.message');\n\nlet searchQuery = null;\nlet page = 1;\nconst per_page = 15;\nlet numberLastPage = null;\n\nform.addEventListener('submit', onFormSubmit);\nmoreBtn.addEventListener('click', paginationElements)\n\nasync function onFormSubmit(e) {\n    e.preventDefault();\n    searchQuery = e.target.elements.input.value.trim();\n    try {\n        resetForm();\n        const response = await fetch();\n        if (response.total != 0 && response.total > per_page) {\n            numberLastPage = Math.round(response.totalHits / per_page)\n            showSpinner(true);\n            renderContent(response);\n            showSpinner(false);\n            showMoreBtn(true);\n        }\n        if (response.total != 0 && response.total < per_page) {\n            renderContent(response);\n            lastPageMessage.style.display = 'block';\n        }\n        if (response.total === 0) {\n            iziToast.show(iziToastError);\n        }\n    } catch (error) {\n        console.log(error.status);\n    }\n    popupPictureWindow().refresh();\n}\n\nasync function paginationElements() {\n    page++;\n    showMoreBtn(false);\n    showSpinner(true);\n    const response = await fetch();\n    renderContent(response);\n    if (page < numberLastPage) {\n        scrollGallery();\n        showSpinner(false);\n        showMoreBtn(true);\n    } else {\n        showMoreBtn(false);\n        showSpinner(false);\n        lastPageMessage.style.display = 'block'\n    }\n    popupPictureWindow().refresh();\n}\n\nasync function fetch() {\n    const API_KEY = '41991233-e464ef3fed32efbb52a55d5bb'\n    const instance = axios.create({\n        baseURL: 'https://pixabay.com'\n    });\n    const params = {\n        page,\n        per_page,\n        orientation: 'horizontal',\n        image_type: 'photo',\n    }\n    const response = await instance.get(`/api/?key=${API_KEY}&q=${searchQuery}`, { params });\n    return response.data;\n}\nfunction showMoreBtn(show) {\n    show ? moreBtn.style.display = 'block' : moreBtn.style.display = 'none';\n}\nfunction showSpinner(show) {\n    show ? spinner.style.visibility = 'visible' : spinner.style.visibility = 'hidden';\n}\nfunction resetForm() {\n    form.reset();\n    gallery.innerHTML = '';\n    page = 1;\n    showSpinner(false);\n    showMoreBtn(false);\n    lastPageMessage.style.display = 'none';\n}\nfunction popupPictureWindow() {\n    let lightbox = new SimpleLightbox('.gallery a', {\n        captions: true,\n        captionType: 'attr',\n        captionsData: 'title',\n        captionDelay: 250,\n        captionPosition: 'bottom',\n    });\n    lightbox.show();\n    return lightbox;\n}\npopupPictureWindow();\nfunction scrollGallery() {\n    const galleryItem = document.querySelector('.gallery-item');\n    let height = galleryItem.getBoundingClientRect().height;\n    height = Math.round(height);\n    const scrollByTimes = 2;\n    window.scrollBy(0, height * scrollByTimes);\n}"],"names":["gallery","renderContent","hits","markup","largeImageURL","webformatURL","likes","views","comments","downloads","errorMessage","iziToastError","form","moreBtn","spinner","lastPageMessage","searchQuery","page","per_page","numberLastPage","onFormSubmit","paginationElements","e","resetForm","response","fetch","showSpinner","showMoreBtn","iziToast","error","popupPictureWindow","scrollGallery","API_KEY","instance","axios","params","show","lightbox","SimpleLightbox","height","scrollByTimes"],"mappings":"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"}