{"version":3,"file":"commonHelpers.js","sources":["../src/js/renderMarkup.js","../src/main.js"],"sourcesContent":["const gallery = document.querySelector('.gallery');\n\nexport function renderContent({ hits }) {\n    const markup = hits.map(({ largeImageURL, webformatURL, likes, views, comments, downloads }) => {\n        return `\n        <li class=\"gallery-item\">\n        <a href=\"${largeImageURL}\">\n        <img\n        src=\"${webformatURL}\"\n        alt=\"\"\n        class=\"gallery-item-img\"\n        width=\"350\"\n        height=\"200\"/>\n        </a>\n        <div class=\"info-wrapper\">\n        <ul class=\"info-list\">\n        <li class=\"info-item\">\n        <p class=\"info-name\">Likes</p>\n        <p class=\"info-value\">${likes}</p>\n        </li>\n        <li class=\"info-item\">\n        <p class=\"info-name\">Viewes</p>\n        <p class=\"info-value\">${views}</p>\n        </li>\n        <li class=\"info-item\">\n        <p class=\"info-name\">Comments</p>\n        <p class=\"info-value\">${comments}</p>\n        </li>\n        <li class=\"info-item\">\n        <p class=\"info-name\">Downloads</p>\n        <p class=\"info-value\">${downloads}</p>\n        </li>\n        </ul>\n        </div>\n        </li>`\n    }).join('');\n    gallery.innerHTML += markup;\n}","'use strict';\nimport axios from \"axios\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport { renderContent } from \"./js/renderMarkup\";\n\nconst form = document.querySelector('.form'),\n    gallery = document.querySelector('.gallery'),\n    moreBtn = document.querySelector('.more'),\n    spinner = document.querySelector('.spinner');\n\nlet request = null;\nlet page = 1;\nconst per_page = 15;\nlet numberLastPage = null;\n\nform.addEventListener('submit', onFormSubmit);\nmoreBtn.addEventListener('click', paginationElements)\n\nasync function onFormSubmit(e) {\n    e.preventDefault();\n    request = e.target.elements.input.value.trim();\n    try {\n        resetForm();\n        const response = await fetch();\n        showSpinner(true);\n        renderContent(response);\n        showSpinner(false);\n        showMoreBtn(true);\n    } catch (error) {\n        iziToast.error({\n            title: 'Error',\n            message: error.message\n        })\n    }\n    popupPictureWindow();\n}\n\nasync function paginationElements() {\n    page++;\n    showMoreBtn(false);\n    showSpinner(true);\n    const response = await fetch();\n    if (page !== numberLastPage) {\n        renderContent(response);\n        scrollGallery();\n        showSpinner(false);\n        showMoreBtn(true);\n    } else {\n        showMoreBtn(false);\n        showSpinner(false);\n        reportTheEndSearch();\n    }\n    popupPictureWindow();\n}\n\nasync function fetch() {\n    const API_KEY = '41991233-e464ef3fed32efbb52a55d5bb'\n    const instance = axios.create({\n        baseURL: 'https://pixabay.com'\n    });\n    const params = {\n        page,\n        per_page,\n        orientation: 'horizontal',\n        image_type: 'photo',\n    }\n    const response = await instance.get(`/api/?key=${API_KEY}&q=${request}`, { params });\n    numberLastPage = Math.floor(response.data.totalHits / per_page);\n    return response.data;\n}\nfunction showMoreBtn(show) {\n    return show ? moreBtn.style.display = 'block' : moreBtn.style.display = 'none';\n}\nfunction showSpinner(show) {\n    return show ? spinner.style.visibility = 'visible' : spinner.style.visibility = 'hidden';\n}\nfunction resetForm() {\n    form.reset();\n    gallery.innerHTML = '';\n    page = 1;\n}\nfunction reportTheEndSearch() {\n    const noMorePagesMessage = document.createElement('p');\n    const noMoreText = \"We're sorry, but you've reached the end of search results.\";\n    noMorePagesMessage.classList.add('message');\n    noMorePagesMessage.textContent = noMoreText;\n    gallery.parentNode.appendChild(noMorePagesMessage)\n}\nfunction popupPictureWindow() {\n    let lightbox = new SimpleLightbox('.gallery a', {\n        captions: true,\n        captionType: 'attr',\n        captionsData: 'title',\n        captionDelay: 250,\n        captionPosition: 'bottom',\n    });\n    lightbox.show();\n    lightbox.refresh();\n}\nfunction scrollGallery() {\n    const galleryItem = document.querySelector('.gallery-item');\n    let height = galleryItem.getBoundingClientRect().height;\n    height = Math.round(height);\n    const scrollByTimes = 2;\n    window.scrollBy(0, height * scrollByTimes);\n}"],"names":["gallery","renderContent","hits","markup","largeImageURL","webformatURL","likes","views","comments","downloads","form","moreBtn","spinner","request","page","per_page","numberLastPage","onFormSubmit","paginationElements","resetForm","response","fetch","showSpinner","showMoreBtn","error","iziToast","popupPictureWindow","scrollGallery","reportTheEndSearch","API_KEY","instance","axios","params","show","noMorePagesMessage","noMoreText","lightbox","SimpleLightbox","height","scrollByTimes"],"mappings":"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"}