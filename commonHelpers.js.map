{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import axios from \"axios\";\nimport iziToast from \"izitoast\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\n\nconst form = document.querySelector('.form'),\n    gallery = document.querySelector('.gallery'),\n    moreBtn = document.querySelector('.more'),\n    spinner = document.querySelector('.spinner');\n\nlet request = null;\nlet page = 1;\nconst per_page = 50;\nlet numberLastPage = null;\n\nform.addEventListener('submit', async (e) => {\n    e.preventDefault();\n    request = e.target.elements.input.value.trim();\n    try {\n        form.reset();\n        gallery.innerHTML = '';\n        page = 1;\n        showSpinner(true);\n        const response = await fetch();\n        renderContent(response);\n        showSpinner(false);\n        showMoreBtn(true);\n    } catch (error) {\n        console.log(error);\n    }\n    let lightbox = new SimpleLightbox('.gallery a', {\n        captions: true,\n        captionType: 'attr',\n        captionsData: 'title',\n        captionDelay: 250,\n        captionPosition: 'bottom',\n    });\n    lightbox.show();\n})\n\nmoreBtn.addEventListener('click', async () => {\n    page++;\n    showMoreBtn(false);\n    showSpinner(true);\n    const response = await fetch();\n    if (page < numberLastPage) {\n        renderContent(response);\n        showSpinner(false);\n        showMoreBtn(true)\n    } else {\n        showMoreBtn(false);\n        showSpinner(false);\n        reportTheEndSearch();\n    }\n})\n\nasync function fetch() {\n    const instance = axios.create({\n        baseURL: 'https://pixabay.com'\n    });\n    const params = {\n        page,\n        per_page,\n        orientation: 'horizontal',\n        image_type: 'photo',\n        safesearch: true,\n    }\n    const response = await instance.get(`/api/?key=41991233-e464ef3fed32efbb52a55d5bb&q=${request}`, { params });\n    numberLastPage = Math.ceil(response.data.totalHits / per_page);\n    return response.data;\n}\n\nfunction renderContent({ hits }) {\n    const markup = hits.map(({ largeImageURL, webformatURL, likes, views, comments, downloads }) => {\n        return `\n        <li class=\"gallery-item\">\n        <a href=\"${largeImageURL}\">\n        <img\n        src=\"${webformatURL}\"\n        alt=\"\"\n        class=\"gallery-item-img\"\n        width=\"350\"\n        height=\"200\"/>\n        </a>\n        <div class=\"info-wrapper\">\n        <ul class=\"info-list\">\n        <li class=\"info-item\">\n        <p class=\"info-name\">Likes</p>\n        <p class=\"info-value\">${likes}</p>\n        </li>\n        <li class=\"info-item\">\n        <p class=\"info-name\">Viewes</p>\n        <p class=\"info-value\">${views}</p>\n        </li>\n        <li class=\"info-item\">\n        <p class=\"info-name\">Comments</p>\n        <p class=\"info-value\">${comments}</p>\n        </li>\n        <li class=\"info-item\">\n        <p class=\"info-name\">Downloads</p>\n        <p class=\"info-value\">${downloads}</p>\n        </li>\n        </ul>\n        </div>\n        </li>`\n    }).join('');\n    gallery.innerHTML += markup;\n}\n\nfunction showMoreBtn(show) {\n    return show ? moreBtn.style.display = 'block' : moreBtn.style.display = 'none';\n}\nfunction showSpinner(show) {\n    return show ? spinner.style.visibility = 'visible' : spinner.style.visibility = 'hidden';\n}\nfunction reportTheEndSearch() {\n    const noMorePagesMessage = document.createElement('p');\n    const noMoreText = \"We're sorry, but you've reached the end of search results.\";\n    noMorePagesMessage.classList.add('message');\n    noMorePagesMessage.textContent = noMoreText;\n    gallery.parentNode.appendChild(noMorePagesMessage)\n}\n"],"names":["form","gallery","moreBtn","spinner","request","page","per_page","numberLastPage","showSpinner","response","fetch","renderContent","showMoreBtn","error","SimpleLightbox","reportTheEndSearch","instance","axios","params","hits","markup","largeImageURL","webformatURL","likes","views","comments","downloads","show","noMorePagesMessage","noMoreText"],"mappings":"6vBAMA,MAAMA,EAAO,SAAS,cAAc,OAAO,EACvCC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAU,SAAS,cAAc,OAAO,EACxCC,EAAU,SAAS,cAAc,UAAU,EAE/C,IAAIC,EAAU,KACVC,EAAO,EACX,MAAMC,EAAW,GACjB,IAAIC,EAAiB,KAErBP,EAAK,iBAAiB,SAAU,MAAO,GAAM,CACzC,EAAE,eAAc,EAChBI,EAAU,EAAE,OAAO,SAAS,MAAM,MAAM,OACxC,GAAI,CACAJ,EAAK,MAAK,EACVC,EAAQ,UAAY,GACpBI,EAAO,EACPG,EAAY,EAAI,EAChB,MAAMC,EAAW,MAAMC,IACvBC,EAAcF,CAAQ,EACtBD,EAAY,EAAK,EACjBI,EAAY,EAAI,CACnB,OAAQC,EAAP,CACE,QAAQ,IAAIA,CAAK,CACpB,CACc,IAAIC,EAAe,aAAc,CAC5C,SAAU,GACV,YAAa,OACb,aAAc,QACd,aAAc,IACd,gBAAiB,QACzB,CAAK,EACQ,KAAI,CACjB,CAAC,EAEDZ,EAAQ,iBAAiB,QAAS,SAAY,CAC1CG,IACAO,EAAY,EAAK,EACjBJ,EAAY,EAAI,EAChB,MAAMC,EAAW,MAAMC,IACnBL,EAAOE,GACPI,EAAcF,CAAQ,EACtBD,EAAY,EAAK,EACjBI,EAAY,EAAI,IAEhBA,EAAY,EAAK,EACjBJ,EAAY,EAAK,EACjBO,IAER,CAAC,EAED,eAAeL,GAAQ,CACnB,MAAMM,EAAWC,EAAM,OAAO,CAC1B,QAAS,qBACjB,CAAK,EACKC,EAAS,CACX,KAAAb,EACA,SAAAC,EACA,YAAa,aACb,WAAY,QACZ,WAAY,EACf,EACKG,EAAW,MAAMO,EAAS,IAAI,kDAAkDZ,IAAW,CAAE,OAAAc,CAAM,CAAE,EAC3G,OAAAX,EAAiB,KAAK,KAAKE,EAAS,KAAK,UAAYH,CAAQ,EACtDG,EAAS,IACpB,CAEA,SAASE,EAAc,CAAE,KAAAQ,GAAQ,CAC7B,MAAMC,EAASD,EAAK,IAAI,CAAC,CAAE,cAAAE,EAAe,aAAAC,EAAc,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAS,IAC9E;AAAA;AAAA,mBAEIL;AAAA;AAAA,eAEJC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gCAUiBC;AAAA;AAAA;AAAA;AAAA,gCAIAC;AAAA;AAAA;AAAA;AAAA,gCAIAC;AAAA;AAAA;AAAA;AAAA,gCAIAC;AAAA;AAAA;AAAA;AAAA,cAK3B,EAAE,KAAK,EAAE,EACVzB,EAAQ,WAAamB,CACzB,CAEA,SAASR,EAAYe,EAAM,CACvB,OAAOA,EAAOzB,EAAQ,MAAM,QAAU,QAAUA,EAAQ,MAAM,QAAU,MAC5E,CACA,SAASM,EAAYmB,EAAM,CACvB,OAAOA,EAAOxB,EAAQ,MAAM,WAAa,UAAYA,EAAQ,MAAM,WAAa,QACpF,CACA,SAASY,GAAqB,CAC1B,MAAMa,EAAqB,SAAS,cAAc,GAAG,EAC/CC,EAAa,6DACnBD,EAAmB,UAAU,IAAI,SAAS,EAC1CA,EAAmB,YAAcC,EACjC5B,EAAQ,WAAW,YAAY2B,CAAkB,CACrD"}